<!DOCTYPE html>
<html lang="id" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aether Blades | Next-Gen AI Gesture Game</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Icons & Animation -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'] },
                    colors: {
                        game: {
                            cyan: '#00E6FF',
                            amber: '#FF8C00',
                            blue: '#0066FF',
                            dark: '#0F172A',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        .hero-pattern {
            background-image: radial-gradient(#0066FF 0.5px, transparent 0.5px);
            background-size: 30px 30px;
            opacity: 0.1;
        }

        /* Carousel Styling */
        .carousel-container {
            overflow: hidden;
            position: relative;
            border-radius: 2rem;
        }
        .carousel-track {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .carousel-slide {
            min-width: 100%;
            aspect-ratio: 16/9;
        }
        .carousel-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .bento-card {
            background: #FFFFFF;
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        .bento-card:hover {
            border-color: #0066FF;
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 102, 255, 0.1);
        }

        .code-container {
            background: #0F172A;
            color: #94A3B8;
            border-radius: 1rem;
            padding: 1.5rem;
            font-family: 'Consolas', monospace;
            font-size: 13px;
            overflow-x: auto;
        }
    </style>
</head>

<body class="bg-white text-slate-700 antialiased selection:bg-game-blue selection:text-white">

    <!-- NAV -->
    <nav class="fixed w-full z-50 bg-white/80 backdrop-blur-lg border-b border-slate-100">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-9 h-9 bg-gradient-to-br from-game-cyan to-game-blue rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-500/20">
                    <i class="fas fa-bolt"></i>
                </div>
                <span class="font-extrabold text-game-dark text-xl tracking-tighter">AETHER<span class="text-game-blue">BLADES</span></span>
            </div>
            <div class="hidden md:flex gap-10 text-sm font-bold text-slate-500 tracking-tight">
                <a href="#preview" class="hover:text-game-blue transition">Gallery</a>
                <a href="#how-to-play" class="hover:text-game-blue transition">How to Play</a>
                <a href="#source-code" class="hover:text-game-blue transition">Source Code</a>
            </div>
            <a href="#source-code" class="bg-game-dark text-white text-xs font-bold py-2.5 px-6 rounded-full hover:shadow-xl hover:shadow-blue-500/20 transition uppercase tracking-widest">
                Download Script
            </a>
        </div>
    </nav>

    <!-- HERO -->
    <header class="relative pt-32 pb-16 lg:pt-48 lg:pb-24 hero-pattern overflow-hidden text-center">
        <div class="max-w-4xl mx-auto px-6" data-aos="fade-up">
            <span class="inline-block py-1 px-4 rounded-full bg-blue-50 text-game-blue text-[10px] font-black tracking-[0.2em] uppercase mb-6 border border-blue-100 shadow-sm">
                Experimental AI Vision Game
            </span>
            <h1 class="text-5xl lg:text-8xl font-black text-game-dark leading-[1] mb-8 tracking-tighter">
                Jadikan Tanganmu <br> <span class="text-transparent bg-clip-text bg-gradient-to-r from-game-blue to-game-cyan">Pedang Cahaya.</span>
            </h1>
            <p class="text-xl text-slate-500 mb-10 leading-relaxed max-w-2xl mx-auto font-medium">
                Rasakan sensasi menebas buah virtual di layar tanpa menyentuh apa pun. Cukup gunakan webcam dan biarkan AI kami bekerja.
            </p>
            <div class="flex justify-center gap-4">
                <a href="#source-code" class="bg-game-blue hover:bg-game-dark text-white font-extrabold py-4 px-10 rounded-2xl transition shadow-2xl shadow-blue-500/40 flex items-center gap-3">
                    MAIN SEKARANG <i class="fas fa-play text-xs"></i>
                </a>
            </div>
        </div>
    </header>

    <!-- IMAGE CAROUSEL SECTION -->
    <section id="preview" class="py-12 bg-white">
        <div class="max-w-6xl mx-auto px-6">
            <div class="carousel-container shadow-[0_32px_64px_-16px_rgba(0,0,0,0.2)] border-8 border-white" data-aos="zoom-in">
                <div class="carousel-track" id="track">
                    <!-- Slide 1: Menu Game -->
                    <div class="carousel-slide relative">
                        <img src="asset/home.png" alt="Menu Preview">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-12 text-white">
                            <div><h3 class="text-2xl font-black">START MENU</h3><p class="opacity-80">Antarmuka futuristik berbasis deteksi gestur.</p></div>
                        </div>
                    </div>
                    <!-- Slide 2: In-Game Action -->
                    <div class="carousel-slide relative">
                        <img src="asset/game.png" alt="Action Preview">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-12 text-white">
                            <div><h3 class="text-2xl font-black">INTENSE SLASHING</h3><p class="opacity-80">Pelacakan gerakan tangan 60 FPS tanpa lag.</p></div>
                        </div>
                    </div>
                    <!-- Slide 3: Game Over -->
                    <div class="carousel-slide relative">
                        <img src="asset/result.png" alt="Final Score Preview">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-12 text-white">
                            <div><h3 class="text-2xl font-black">LOCAL MULTIPLAYER</h3><p class="opacity-80">Bertanding skor dengan teman di sisi layar yang berbeda.</p></div>
                        </div>
                    </div>
                </div>

                <!-- Carousel Controls -->
                <button onclick="move(1)" class="absolute right-6 top-1/2 -translate-y-1/2 bg-white/90 w-12 h-12 rounded-full shadow-lg flex items-center justify-center hover:bg-game-blue hover:text-white transition group z-10">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button onclick="move(-1)" class="absolute left-6 top-1/2 -translate-y-1/2 bg-white/90 w-12 h-12 rounded-full shadow-lg flex items-center justify-center hover:bg-game-blue hover:text-white transition group z-10">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            
            <p class="text-center mt-8 text-sm text-slate-400 font-bold uppercase tracking-widest italic">
                <i class="fas fa-info-circle mr-2"></i> Klik panah untuk melihat tangkapan layar game
            </p>
        </div>
    </section>

    <!-- HOW TO PLAY (BENTO GRID) -->
    <section id="how-to-play" class="py-24 bg-slate-50">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-16" data-aos="fade-up">
                <h2 class="text-4xl font-black text-game-dark tracking-tighter">Hanya Butuh Tanganmu.</h2>
                <p class="text-slate-500 mt-4">Tanpa kontroler, tanpa kabel, murni teknologi AI.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bento-card p-10 rounded-3xl" data-aos="fade-up" data-aos-delay="100">
                    <div class="w-14 h-14 bg-blue-100 text-game-blue rounded-2xl flex items-center justify-center mb-6 text-2xl">
                        <i class="fas fa-hand-scissors"></i>
                    </div>
                    <h3 class="text-2xl font-black text-game-dark mb-4 tracking-tighter">AI Vision Tracking</h3>
                    <p class="text-slate-500 leading-relaxed text-sm">Mendeteksi 21 titik koordinat tangan secara instan untuk presisi tebasan tingkat milimeter.</p>
                </div>

                <div class="bento-card p-10 rounded-3xl border-game-blue/20 bg-gradient-to-br from-white to-blue-50/50" data-aos="fade-up" data-aos-delay="200">
                    <div class="w-14 h-14 bg-game-dark text-white rounded-2xl flex items-center justify-center mb-6 text-2xl">
                        <i class="fas fa-fire"></i>
                    </div>
                    <h3 class="text-2xl font-black text-game-dark mb-4 tracking-tighter">Combo System</h3>
                    <p class="text-slate-500 leading-relaxed text-sm">Tebas beberapa buah sekaligus dalam satu gerakan untuk mendapatkan skor AETHER x10!</p>
                </div>

                <div class="bento-card p-10 rounded-3xl" data-aos="fade-up" data-aos-delay="300">
                    <div class="w-14 h-14 bg-orange-100 text-game-amber rounded-2xl flex items-center justify-center mb-6 text-2xl">
                        <i class="fas fa-bomb"></i>
                    </div>
                    <h3 class="text-2xl font-black text-game-dark mb-4 tracking-tighter">Avoid Bombs</h3>
                    <p class="text-slate-500 leading-relaxed text-sm">Waspada dengan bom hitam! Satu tebakan yang salah akan mengguncang layar dan mengurangi poinmu.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- SOURCE CODE SECTION -->
    <section id="source-code" class="py-24 bg-white">
        <div class="max-w-5xl mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-end mb-8 gap-4">
                <div class="text-left">
                    <h2 class="text-4xl font-black text-game-dark tracking-tighter">Instalasi & Script</h2>
                    <p class="text-slate-500 mt-2">Salin kode ini dan jalankan di komputermu sendiri.</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="copyToClipboard('full-code')" class="bg-game-blue text-white text-xs font-bold px-8 py-4 rounded-xl hover:bg-game-dark transition shadow-lg flex items-center gap-2 uppercase tracking-widest">
                        <i class="fas fa-copy"></i> Copy Script
                    </button>
                </div>
            </div>

            <!-- Steps -->
            <div class="grid md:grid-cols-2 gap-4 mb-8">
                <div class="p-6 bg-slate-50 rounded-2xl border border-slate-100 flex items-center gap-4">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm font-bold text-game-blue">1</div>
                    <p class="text-sm font-medium">Install: <code class="text-pink-600 bg-white px-2 py-1 rounded">pip install opencv-python mediapipe numpy</code></p>
                </div>
                <div class="p-6 bg-slate-50 rounded-2xl border border-slate-100 flex items-center gap-4">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm font-bold text-game-blue">2</div>
                    <p class="text-sm font-medium">Buat file <code class="text-blue-600 bg-white px-2 py-1 rounded">main.py</code> dan tempel kode di bawah.</p>
                </div>
            </div>

            <div class="code-container shadow-2xl">
<pre id="full-code">
import cv2
import mediapipe as mp
import numpy as np
import time
import random
import math
from collections import deque
import threading

# =========================
# ADVANCED SOUND ENGINE
# =========================
try:
    import winsound
    def play_sound(kind):
        def _play():
            try:
                if kind == "slice": winsound.Beep(880, 35)
                elif kind == "bomb": winsound.Beep(200, 180)
                elif kind == "combo": winsound.Beep(1200, 45)
                elif kind == "start":
                    for f in [440, 880, 1320]:
                        winsound.Beep(f, 55)
            except:
                pass
        threading.Thread(target=_play, daemon=True).start()
except:
    def play_sound(kind): pass

# =========================
# BRANDING & COLORS
# =========================
GAME_NAME = "AETHER BLADES"
COLOR_P1 = (255, 230, 0)     # Neon Cyan-ish
COLOR_P2 = (0, 140, 255)     # Neon Ember
COLOR_BOMB = (40, 40, 45)
COLOR_UI = (255, 255, 255)

WIDTH, HEIGHT = 1280, 720
NET_X = WIDTH // 2

# =========================
# PERFORMANCE TUNING
# =========================
TRACK_W, TRACK_H = 480, 270      # tracking kecil = lebih cepat
TARGET_FPS = 60.0

cv2.setUseOptimized(True)
cv2.setNumThreads(0)

# =========================
# CAMERA (LOW LATENCY)
# =========================
class Camera:
    def __init__(self, src=0, width=1280, height=720, backend=cv2.CAP_DSHOW):
        self.cap = cv2.VideoCapture(src, backend)
        self.cap.set(cv2.CAP_PROP_FRAME_WIDTH, width)
        self.cap.set(cv2.CAP_PROP_FRAME_HEIGHT, height)
        self.cap.set(cv2.CAP_PROP_BUFFERSIZE, 1)

        self.lock = threading.Lock()
        self.frame = None
        self.running = True
        self.ok = True
        self.t = threading.Thread(target=self._loop, daemon=True)
        self.t.start()

    def _loop(self):
        while self.running:
            if not self.cap.isOpened():
                self.ok = False
                time.sleep(0.01)
                continue

            # grab latest frame (reduce latency)
            grabbed = self.cap.grab()
            if not grabbed:
                self.ok = False
                time.sleep(0.005)
                continue

            ok, fr = self.cap.retrieve()
            if not ok:
                self.ok = False
                continue

            with self.lock:
                self.frame = fr
                self.ok = True

    def read(self):
        with self.lock:
            if self.frame is None:
                return False, None
            return True, self.frame.copy()

    def release(self):
        self.running = False
        try:
            self.t.join(timeout=0.2)
        except:
            pass
        self.cap.release()

def window_closed(name):
    try:
        return cv2.getWindowProperty(name, cv2.WND_PROP_VISIBLE) < 1
    except:
        return True

# =========================
# HELPERS
# =========================
def clamp(v, a, b):
    return max(a, min(b, v))

def put_text(img, text, org, scale=1.0, color=(255,255,255), th=2, font=cv2.FONT_HERSHEY_DUPLEX):
    cv2.putText(img, text, org, font, scale, (0,0,0), th+3, cv2.LINE_AA)
    cv2.putText(img, text, org, font, scale, color, th, cv2.LINE_AA)

def glass_panel(img, x, y, w, h, title="", val=""):
    # lightweight "glass": blur + tint
    x0, y0 = max(0, x), max(0, y)
    x1, y1 = min(img.shape[1], x+w), min(img.shape[0], y+h)
    if x1 <= x0 or y1 <= y0:
        return
    roi = img[y0:y1, x0:x1]
    blur = cv2.GaussianBlur(roi, (21, 21), 0)
    tint = np.full_like(blur, (20, 20, 25), dtype=np.uint8)
    panel = cv2.addWeighted(blur, 0.88, tint, 0.12, 0)
    img[y0:y1, x0:x1] = cv2.addWeighted(panel, 0.82, roi, 0.18, 0)

    cv2.rectangle(img, (x0, y0), (x1, y1), (255,255,255), 1, cv2.LINE_AA)
    if title:
        cv2.putText(img, title, (x+10, y+25), cv2.FONT_HERSHEY_SIMPLEX, 0.6, (200,200,200), 1, cv2.LINE_AA)
        cv2.putText(img, val, (x+10, y+70), cv2.FONT_HERSHEY_DUPLEX, 1.2, (255,255,255), 2, cv2.LINE_AA)

def adaptive_smooth(old, new):
    """Fast movement => more responsive, slow => smoother."""
    if new is None:
        return old
    ox, oy = old
    nx, ny = new
    speed = math.hypot(nx-ox, ny-oy)
    a = 0.35 if speed < 18 else 0.78
    return (int((1-a)*ox + a*nx), int((1-a)*oy + a*ny))

# =========================
# CORE CLASSES
# =========================
class Particle:
    def __init__(self, x, y, color, is_splatter=False):
        self.x, self.y = float(x), float(y)
        self.color = color
        self.is_splatter = is_splatter
        self.vx = random.uniform(-10, 10)
        self.vy = random.uniform(-15, 5)
        self.life = 1.0
        self.size = random.randint(10, 22) if is_splatter else random.randint(3, 7)
        self.gravity = 0.35 if not is_splatter else 0.10

    def update(self, dt):
        step = dt * 60.0
        self.x += self.vx * step
        self.y += self.vy * step
        self.vy += self.gravity * step
        self.life -= 0.040 * step

class AetherFruit:
    def __init__(self, side):
        self.side = side
        self.radius = 42
        self.active = True
        self.is_bomb = random.random() < 0.15
        self.color = COLOR_P1 if side == 'p1' else COLOR_P2
        if self.is_bomb:
            self.color = COLOR_BOMB

        margin = 150
        if side == 'p1':
            self.x = random.randint(margin, WIDTH//2 - margin)
            self.vx = random.uniform(2.0, 5.0)
        else:
            self.x = random.randint(WIDTH//2 + margin, WIDTH - margin)
            self.vx = random.uniform(-5.0, -2.0)

        self.y = HEIGHT + 50
        self.vy = random.uniform(-23, -17)
        self.rot = 0.0
        self.rot_v = random.uniform(-5, 5)

    def update(self, dt):
        step = dt * 60.0
        self.x += self.vx * step
        self.y += self.vy * step
        self.vy += 0.55 * step
        self.rot += self.rot_v * step
        return self.y < HEIGHT + 100 and -200 < self.x < WIDTH + 200

    def draw(self, img):
        if not self.active:
            return
        cx, cy = int(self.x), int(self.y)

        # glow ring
        glow = img.copy()
        cv2.circle(glow, (cx, cy), self.radius+12, tuple(int(c*0.25) for c in self.color), 3, cv2.LINE_AA)
        cv2.addWeighted(glow, 0.25, img, 0.75, 0, img)

        cv2.circle(img, (cx, cy), self.radius, self.color, -1, cv2.LINE_AA)
        cv2.circle(img, (cx-12, cy-12), 9, (255,255,255), -1, cv2.LINE_AA)

        if self.is_bomb:
            put_text(img, "X", (cx-14, cy+12), 1.1, (0,0,255), 3, cv2.FONT_HERSHEY_SIMPLEX)

# =========================
# HAND TRACKING (FAST + STABLE)
# =========================
def palm_center(hand_lms, sx, sy):
    # Palm center average: 0,5,9,13,17
    idxs = [0, 5, 9, 13, 17]
    xs = [hand_lms.landmark[i].x for i in idxs]
    ys = [hand_lms.landmark[i].y for i in idxs]
    x = int(np.mean(xs) * TRACK_W * sx)
    y = int(np.mean(ys) * TRACK_H * sy)
    return x, y

def index_tip(hand_lms, sx, sy):
    x = int(hand_lms.landmark[8].x * TRACK_W * sx)
    y = int(hand_lms.landmark[8].y * TRACK_H * sy)
    return x, y

def pick_best_per_side(landmarks, sx, sy):
    """
    Return tips dict: {'p1':(x,y) or None, 'p2':(x,y) or None}
    Strategy:
    - Compute palm center for each detected hand
    - Assign by palm center x < NET => p1 else p2
    - If multiple hands fall in same side, pick the one closest to that side center
    """
    cand = {'p1': [], 'p2': []}
    for hlm in landmarks:
        px, py = palm_center(hlm, sx, sy)
        tx, ty = index_tip(hlm, sx, sy)
        side = 'p1' if px < NET_X else 'p2'
        cand[side].append(((tx, ty), (px, py)))

    tips = {'p1': None, 'p2': None}
    if cand['p1']:
        target = (WIDTH//4, HEIGHT//2)
        tips['p1'] = min(cand['p1'], key=lambda item: (item[1][0]-target[0])**2 + (item[1][1]-target[1])**2)[0]
    if cand['p2']:
        target = (3*WIDTH//4, HEIGHT//2)
        tips['p2'] = min(cand['p2'], key=lambda item: (item[1][0]-target[0])**2 + (item[1][1]-target[1])**2)[0]
    return tips

# =========================
# GAME ENGINE
# =========================
class AetherEngine:
    def __init__(self):
        # Low-latency cam for laptop webcam
        self.cam = Camera(0, width=WIDTH, height=HEIGHT, backend=cv2.CAP_DSHOW)

        # MediaPipe lightweight
        self.hands = mp.solutions.hands.Hands(
            max_num_hands=2,
            model_complexity=0,
            min_detection_confidence=0.6,
            min_tracking_confidence=0.6
        )

        self.state = "MENU"  # MENU, PLAY, GAMEOVER
        self.reset_data()

    def reset_data(self):
        self.score = {'p1': 0, 'p2': 0}
        self.combo = {'p1': 0, 'p2': 0}
        self.last_hit = {'p1': 0.0, 'p2': 0.0}
        self.fruits = []
        self.particles = []
        self.trails = {'p1': deque(maxlen=15), 'p2': deque(maxlen=15)}
        self.shake = 0
        self.timer = 60
        self.start_time = 0.0
        self._spawn_cd = 0.0

    def apply_camera_shake(self, img):
        if self.shake > 0:
            dx = random.randint(-self.shake, self.shake)
            dy = random.randint(-self.shake, self.shake)
            M = np.float32([[1, 0, dx], [0, 1, dy]])
            img = cv2.warpAffine(img, M, (WIDTH, HEIGHT))
            self.shake = max(0, self.shake - 2)
        return img

    def run(self):
        cv2.namedWindow(GAME_NAME, cv2.WINDOW_NORMAL)
        prev = time.perf_counter()

        while True:
            if window_closed(GAME_NAME):
                break

            ok, frame = self.cam.read()
            if not ok or frame is None:
                continue

            frame = cv2.flip(frame, 1)

            now = time.perf_counter()
            dt = now - prev
            prev = now
            dt = clamp(dt, 0.0, 0.05)

            # 1) MediaPipe on SMALL frame (speed)
            rgb = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
            small = cv2.resize(rgb, (TRACK_W, TRACK_H))
            results = self.hands.process(small)

            sx = WIDTH / TRACK_W
            sy = HEIGHT / TRACK_H

            # 2) Base render
            display = frame.copy()
            display = self.apply_camera_shake(display)

            # net line
            cv2.line(display, (NET_X, 0), (NET_X, HEIGHT), (255,255,255), 1, cv2.LINE_AA)

            # 3) Hands -> stable tips per side
            tips = {'p1': None, 'p2': None}
            if results.multi_hand_landmarks:
                tips = pick_best_per_side(results.multi_hand_landmarks, sx, sy)

            # 4) Update trails (with smoothing)
            for side in ['p1', 'p2']:
                if tips[side] is not None:
                    if len(self.trails[side]) == 0:
                        self.trails[side].append(tips[side])
                    else:
                        sm = adaptive_smooth(self.trails[side][-1], tips[side])
                        self.trails[side].append(sm)

            # draw trail
            for side in ['p1', 'p2']:
                pts = list(self.trails[side])
                if len(pts) > 1:
                    color = COLOR_P1 if side == 'p1' else COLOR_P2
                    for i in range(1, len(pts)):
                        cv2.line(display, pts[i-1], pts[i], color, i, cv2.LINE_AA)

            # 5) State
            if self.state == "MENU":
                self.draw_menu(display, tips)
            elif self.state == "PLAY":
                self.update_play(display, tips, dt)
            elif self.state == "GAMEOVER":
                self.draw_game_over(display)

            # 6) Input
            cv2.imshow(GAME_NAME, display)
            key = cv2.waitKey(1) & 0xFF
            if key in (ord('q'), 27):  # q or ESC
                break
            if key == ord('r'):
                self.state = "MENU"
                self.reset_data()

        self.cam.release()
        cv2.destroyAllWindows()

    def draw_menu(self, img, tips):
        img[:] = cv2.GaussianBlur(img, (25, 25), 0)
        put_text(img, GAME_NAME, (WIDTH//2-300, HEIGHT//2-120), 2.6, (255,255,255), 5, cv2.FONT_HERSHEY_TRIPLEX)

        cx, cy = WIDTH//2, HEIGHT//2 + 60
        cv2.circle(img, (cx, cy), 64, (255,255,255), 2, cv2.LINE_AA)
        put_text(img, "SLICE TO START", (cx-120, cy+110), 0.95, (255,255,255), 2, cv2.FONT_HERSHEY_SIMPLEX)
        put_text(img, "R: RESET    Q/ESC: QUIT", (cx-150, cy+150), 0.75, (200,200,200), 2, cv2.FONT_HERSHEY_SIMPLEX)

        # detect slice hit start button
        for side in ['p1', 'p2']:
            if tips[side]:
                if math.hypot(tips[side][0]-cx, tips[side][1]-cy) < 64:
                    play_sound("start")
                    self.state = "PLAY"
                    self.start_time = time.time()
                    return

    def update_play(self, img, tips, dt):
        elapsed = time.time() - self.start_time
        self.timer = max(0, 60 - int(elapsed))
        if self.timer <= 0:
            self.state = "GAMEOVER"
            return

        # Spawn with cooldown (lebih stabil daripada random murni)
        self._spawn_cd -= dt
        if self._spawn_cd <= 0 and len(self.fruits) < 10:
            self.fruits.append(AetherFruit('p1'))
            self.fruits.append(AetherFruit('p2'))
            self._spawn_cd = random.uniform(0.25, 0.40)  # rate spawn

        # Update Fruits + collision
        for f in self.fruits[:]:
            if not f.update(dt):
                self.fruits.remove(f)
                continue

            f.draw(img)

            for side in ['p1', 'p2']:
                if tips[side] is None:
                    continue

                # territory rule
                if (side == 'p1' and f.x >= NET_X) or (side == 'p2' and f.x <= NET_X):
                    continue

                if math.hypot(tips[side][0]-f.x, tips[side][1]-f.y) < f.radius + 18:
                    self.handle_slice(f, side)

        # Update Particles (lebih ringan)
        new_particles = []
        for p in self.particles:
            p.update(dt)
            if p.life > 0:
                # draw
                overlay = img.copy()
                cv2.circle(overlay, (int(p.x), int(p.y)), p.size, p.color, -1, cv2.LINE_AA)
                cv2.addWeighted(overlay, clamp(p.life, 0, 1), img, 1-clamp(p.life, 0, 1), 0, img)
                new_particles.append(p)
        self.particles = new_particles

        # HUD
        glass_panel(img, 50, 20, 220, 100, "PLAYER 1", str(self.score['p1']))
        glass_panel(img, WIDTH-270, 20, 220, 100, "PLAYER 2", str(self.score['p2']))
        put_text(img, f"{self.timer}s", (WIDTH//2-35, 55), 1.6, (255,255,255), 2)

        # Combo label
        for s in ['p1', 'p2']:
            if self.combo[s] > 3:
                txt = "AETHER!!" if self.combo[s] > 8 else "COMBO!"
                x_pos = 90 if s == 'p1' else WIDTH-290
                put_text(img, f"{txt} x{self.combo[s]}", (x_pos, 155), 0.95, (0,255,255), 2, cv2.FONT_HERSHEY_TRIPLEX)

    def handle_slice(self, f, side):
        if not f.active:
            return
        f.active = False
        if f in self.fruits:
            self.fruits.remove(f)

        if f.is_bomb:
            play_sound("bomb")
            self.score[side] = max(0, self.score[side] - 50)
            self.shake = 26
            for _ in range(14):
                self.particles.append(Particle(f.x, f.y, (50,50,50), is_splatter=False))
        else:
            play_sound("slice")
            now = time.time()
            if now - self.last_hit[side] < 0.8:
                self.combo[side] += 1
                if self.combo[side] in (4, 7, 10):
                    play_sound("combo")
            else:
                self.combo[side] = 1
            self.last_hit[side] = now

            mult = 1.0 + (self.combo[side] * 0.10)
            self.score[side] += int(10 * mult)

            for _ in range(10):
                self.particles.append(Particle(f.x, f.y, f.color, is_splatter=True))

    def draw_game_over(self, img):
        img[:] = cv2.GaussianBlur(img, (41, 41), 0)
        winner = "DRAW"
        if self.score['p1'] > self.score['p2']:
            winner = "PLAYER 1 DOMINATES"
        elif self.score['p2'] > self.score['p1']:
            winner = "PLAYER 2 DOMINATES"

        put_text(img, "MATCH CONCLUDED", (WIDTH//2-270, HEIGHT//2-70), 1.7, (255,255,255), 3, cv2.FONT_HERSHEY_TRIPLEX)
        put_text(img, winner, (WIDTH//2-240, HEIGHT//2+25), 1.25, (0,255,255), 2, cv2.FONT_HERSHEY_SIMPLEX)
        put_text(img, "PRESS 'R' TO REMATCH", (WIDTH//2-210, HEIGHT//2+135), 0.85, (200,200,200), 2, cv2.FONT_HERSHEY_SIMPLEX)

if __name__ == "__main__":
    game = AetherEngine()
    game.run()
</pre>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-white border-t border-slate-100 pt-20 pb-12">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center gap-12">
                <div class="text-center md:text-left">
                    <div class="flex items-center gap-2 mb-4 justify-center md:justify-start">
                        <div class="w-8 h-8 bg-game-blue rounded-lg flex items-center justify-center text-white">
                            <i class="fas fa-bolt text-xs"></i>
                        </div>
                        <span class="font-black text-game-dark text-xl tracking-tighter">AETHERBLADES</span>
                    </div>
                    <p class="text-slate-500 max-w-sm font-medium leading-relaxed">Satu Kamera, Tanpa Sensor, Rasakan Sensasi Menebas Cahaya.</p>
                </div>
                
                <div class="flex flex-col items-center md:items-end">
                    <p class="text-slate-400 text-xs font-bold uppercase tracking-[0.2em] mb-4">Laboratory IA Studio</p>
                    <div class="flex gap-6">
                        <a href="https://wa.me/6285813877757" target="_blank" class="w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-400 hover:bg-game-blue hover:text-white transition">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="https://github.com/Indrawan1207/Game-AR" target="_blank" class="w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-400 hover:bg-game-blue hover:text-white transition">
                            <i class="fab fa-github"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="mt-20 pt-8 border-t border-slate-100 flex flex-col md:flex-row justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-widest gap-4">
                <div>&copy; 2025 Lab-IA Studio. All Rights Reserved.</div>
                <div class="flex gap-6">
                    <span>MIT License</span>
                    <span class="text-game-blue">Open Source Project</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- SCRIPTS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.css"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({ once: true, duration: 800 });

        // Carousel Logic
        let currentSlide = 0;
        const track = document.getElementById('track');
        const slides = document.querySelectorAll('.carousel-slide');

        function move(dir) {
            currentSlide = (currentSlide + dir + slides.length) % slides.length;
            track.style.transform = `translateX(-${currentSlide * 100}%)`;
        }

        // Copy Function
        function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert("Script berhasil disalin! Selamat coding!");
            });
        }
    </script>
</body>
</html>
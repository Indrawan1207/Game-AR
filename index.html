<!DOCTYPE html>
<html lang="id" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aether Blades | Enterprise AI Vision Showcase</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fonts: Plus Jakarta Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                    },
                    colors: {
                        pro: {
                            primary: '#0066FF',   // Azure Blue
                            secondary: '#00D1FF', // Soft Cyan
                            accent: '#F8FAFC',    // Off-White BG
                            dark: '#0F172A',      // Contrast Text
                        }
                    },
                    animation: {
                        'float': 'float 5s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-15px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        .hero-pattern {
            background-image: radial-gradient(#0066FF 0.5px, transparent 0.5px);
            background-size: 24px 24px;
            opacity: 0.1;
        }

        .glass-header {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .bento-card {
            background: #FFFFFF;
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .bento-card:hover {
            border-color: #0066FF;
            box-shadow: 0 20px 40px rgba(0, 102, 255, 0.08);
            transform: translateY(-5px);
        }

        .code-container {
            background: #0F172A;
            color: #94A3B8;
            border-radius: 1rem;
            padding: 1.5rem;
            font-family: 'Consolas', monospace;
            font-size: 13px;
            line-height: 1.6;
            overflow-x: auto;
            border: 1px solid #1E293B;
        }

        .text-gradient {
            background: linear-gradient(135deg, #0F172A 0%, #0066FF 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>

<body class="text-slate-700 bg-white antialiased selection:bg-pro-primary selection:text-white">

    <!-- NAVIGATION -->
    <nav class="fixed w-full z-50 glass-header">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-pro-primary rounded-lg flex items-center justify-center text-white font-bold">A</div>
                <span class="font-bold text-pro-dark text-xl tracking-tight">Aether<span class="font-light">Blades</span></span>
            </div>
            <div class="hidden md:flex gap-10 text-sm font-semibold text-slate-500 tracking-wide">
                <a href="#vision" class="hover:text-pro-primary transition">Vision AI</a>
                <a href="#install" class="hover:text-pro-primary transition">Instalasi</a>
                <a href="#source-code" class="hover:text-pro-primary transition">Source Code</a>
            </div>
            <a href="#source-code" class="bg-pro-dark text-white text-[10px] font-bold py-2.5 px-6 rounded-full hover:bg-pro-primary transition shadow-lg shadow-blue-500/10 uppercase tracking-widest">
                Get Code
            </a>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <header class="relative pt-40 pb-20 lg:pt-56 lg:pb-32 overflow-hidden">
        <div class="absolute inset-0 hero-pattern -z-10"></div>
        <div class="max-w-7xl mx-auto px-6 grid lg:grid-cols-2 gap-16 items-center">
            
            <div data-aos="fade-right">
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-50 text-pro-primary text-[10px] font-extrabold tracking-widest uppercase mb-6 border border-blue-100">
                    <i class="fas fa-microchip"></i> Next-Gen Computer Vision
                </div>
                <h1 class="text-5xl lg:text-7xl font-extrabold text-pro-dark leading-[1.1] mb-8">
                    Interaksi Digital, <br>
                    <span class="text-gradient">Tanpa Sentuhan.</span>
                </h1>
                <p class="text-xl text-slate-500 mb-10 leading-relaxed max-w-xl">
                    Demonstrasi kecanggihan <b>Augmented Reality</b> berbasis visi komputer. Mengubah gerakan tangan alami menjadi kontrol presisi tinggi secara real-time menggunakan AI.
                </p>
                <div class="flex flex-wrap gap-5">
                    <a href="#source-code" class="bg-pro-primary hover:bg-pro-dark text-white font-bold py-4 px-10 rounded-xl transition shadow-xl shadow-blue-500/25 flex items-center gap-3">
                        Dapatkan Kode <i class="fas fa-code text-xs"></i>
                    </a>
                    <div class="flex items-center gap-4 px-6 border-l border-slate-200">
                        <div>
                            <p class="font-bold text-pro-dark">60 FPS</p>
                            <p class="text-slate-400 text-xs">Latensi Rendah</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="relative" data-aos="zoom-in" data-aos-duration="1200">
                <div class="absolute -top-20 -right-20 w-64 h-64 bg-pro-secondary/10 rounded-full blur-3xl"></div>
                <div class="relative bg-white p-2 rounded-[2.5rem] shadow-2xl border border-slate-100 animate-float overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80&w=1000" 
                         class="rounded-[2rem] w-full grayscale-[20%] hover:grayscale-0 transition duration-700" alt="UI Dashboard">
                </div>
            </div>
        </div>
    </header>

    <!-- FEATURES BENTO GRID -->
    <section id="vision" class="py-24 bg-pro-accent">
        <div class="max-w-7xl mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="md:col-span-2 bento-card p-10 rounded-3xl" data-aos="fade-up">
                    <div class="w-12 h-12 bg-blue-50 text-pro-primary rounded-2xl flex items-center justify-center mb-6 text-xl shadow-inner">
                        <i class="fas fa-hand-sparkles"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-pro-dark mb-4">Neural Hand Tracking</h3>
                    <p class="text-slate-500 leading-relaxed">Algoritma pelacakan 21 titik sendi tangan dalam ruang 3D, memungkinkan interaksi yang sangat detail menyerupai sentuhan nyata menggunakan Google MediaPipe.</p>
                </div>

                <div class="bento-card p-10 rounded-3xl" data-aos="fade-up" data-aos-delay="100">
                    <div class="w-12 h-12 bg-slate-100 text-pro-dark rounded-2xl flex items-center justify-center mb-6 text-xl shadow-inner">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-pro-dark mb-4">Zero Latency</h3>
                    <p class="text-slate-500 text-sm leading-relaxed">Pemrosesan asinkron memastikan game berjalan stabil di 60 FPS bahkan pada perangkat laptop standar.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- ARCHITECTURE FLOW -->
    <section class="py-24 bg-white border-y border-slate-100">
        <div class="max-w-6xl mx-auto px-6">
            <div class="text-center mb-16" data-aos="fade-up">
                <h2 class="text-3xl font-extrabold text-pro-dark">Aliran Data Sistem</h2>
                <p class="text-slate-500 mt-2 italic">End-to-end processing dari sensor hingga output visual</p>
            </div>
            <div class="flex flex-col md:flex-row justify-between items-center gap-8 text-center relative">
                <div class="flex flex-col items-center w-48">
                    <div class="w-16 h-16 bg-slate-50 border border-slate-200 rounded-full flex items-center justify-center text-2xl text-slate-400 mb-4 hover:border-pro-primary hover:text-pro-primary transition">
                        <i class="fas fa-camera"></i>
                    </div>
                    <h5 class="font-bold text-pro-dark text-sm">Webcam Input</h5>
                </div>
                <div class="hidden md:block h-px flex-1 bg-slate-100"></div>
                <div class="flex flex-col items-center w-48">
                    <div class="w-20 h-20 bg-pro-primary shadow-xl rounded-2xl flex items-center justify-center text-3xl text-white mb-4 rotate-3">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h5 class="font-bold text-pro-dark text-sm">MediaPipe AI</h5>
                </div>
                <div class="hidden md:block h-px flex-1 bg-slate-100"></div>
                <div class="flex flex-col items-center w-48">
                    <div class="w-16 h-16 bg-slate-50 border border-slate-200 rounded-full flex items-center justify-center text-2xl text-slate-400 mb-4">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <h5 class="font-bold text-pro-dark text-sm">Visual Engine</h5>
                </div>
            </div>
        </div>
    </section>

    <!-- INSTALLATION GUIDE -->
    <section id="install" class="py-24 bg-white">
        <div class="max-w-4xl mx-auto px-6">
            <h2 class="text-4xl font-extrabold text-pro-dark text-center mb-16">Instalasi Lingkungan</h2>
            <div class="grid gap-8">
                <div class="flex gap-6 p-8 bg-pro-accent rounded-3xl border border-slate-100" data-aos="fade-up">
                    <div class="w-12 h-12 bg-pro-primary text-white rounded-xl flex items-center justify-center font-bold flex-shrink-0">1</div>
                    <div>
                        <h4 class="text-xl font-bold text-pro-dark mb-2">Persiapkan Python</h4>
                        <p class="text-slate-500 text-sm">Gunakan Python versi 3.10 atau lebih baru. Pastikan opsi <span class="bg-white px-2 py-0.5 rounded border font-mono">Add to PATH</span> dicentang saat instalasi.</p>
                    </div>
                </div>
                <div class="flex gap-6 p-8 bg-pro-accent rounded-3xl border border-slate-100" data-aos="fade-up" data-aos-delay="100">
                    <div class="w-12 h-12 bg-pro-primary text-white rounded-xl flex items-center justify-center font-bold flex-shrink-0">2</div>
                    <div class="w-full">
                        <h4 class="text-xl font-bold text-pro-dark mb-4">Instal Library Kunci</h4>
                        <p class="text-slate-500 text-sm mb-4">Jalankan perintah ini pada Terminal atau Command Prompt:</p>
                        <div class="bg-pro-dark p-4 rounded-xl flex justify-between items-center group">
                            <code class="text-blue-400 text-xs" id="pip-command">pip install opencv-python mediapipe numpy</code>
                            <button onclick="copyToClipboard('pip-command')" class="text-slate-500 hover:text-white transition"><i class="fas fa-copy"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SOURCE CODE SECTION -->
    <section id="source-code" class="py-24 bg-slate-50">
        <div class="max-w-5xl mx-auto px-6">
            <div class="flex justify-between items-end mb-8">
                <div>
                    <h2 class="text-3xl font-extrabold text-pro-dark">Script Engine Utama</h2>
                    <p class="text-slate-500 mt-2">Salin kode di bawah dan simpan sebagai <span class="font-mono text-pro-primary">aether_blades.py</span></p>
                </div>
                <button onclick="copyToClipboard('full-code')" class="bg-pro-primary text-white text-xs font-bold px-6 py-3 rounded-lg hover:bg-pro-dark transition shadow-lg flex items-center gap-2">
                    <i class="fas fa-copy"></i> Copy Full Code
                </button>
            </div>

            <div class="code-container">
<pre id="full-code">
import cv2
import mediapipe as mp
import numpy as np
import time
import random
import math
from collections import deque
import threading

# =========================
# ADVANCED SOUND ENGINE
# =========================
try:
    import winsound
    def play_sound(kind):
        def _play():
            try:
                if kind == "slice": winsound.Beep(880, 35)
                elif kind == "bomb": winsound.Beep(200, 180)
                elif kind == "combo": winsound.Beep(1200, 45)
                elif kind == "start":
                    for f in [440, 880, 1320]:
                        winsound.Beep(f, 55)
            except:
                pass
        threading.Thread(target=_play, daemon=True).start()
except:
    def play_sound(kind): pass

# =========================
# BRANDING & COLORS
# =========================
GAME_NAME = "AETHER BLADES"
COLOR_P1 = (255, 230, 0)     # Neon Cyan-ish
COLOR_P2 = (0, 140, 255)     # Neon Ember
COLOR_BOMB = (40, 40, 45)
COLOR_UI = (255, 255, 255)

WIDTH, HEIGHT = 1280, 720
NET_X = WIDTH // 2

# =========================
# PERFORMANCE TUNING
# =========================
TRACK_W, TRACK_H = 480, 270      # tracking kecil = lebih cepat
TARGET_FPS = 60.0

cv2.setUseOptimized(True)
cv2.setNumThreads(0)

# =========================
# CAMERA (LOW LATENCY)
# =========================
class Camera:
    def __init__(self, src=0, width=1280, height=720, backend=cv2.CAP_DSHOW):
        self.cap = cv2.VideoCapture(src, backend)
        self.cap.set(cv2.CAP_PROP_FRAME_WIDTH, width)
        self.cap.set(cv2.CAP_PROP_FRAME_HEIGHT, height)
        self.cap.set(cv2.CAP_PROP_BUFFERSIZE, 1)

        self.lock = threading.Lock()
        self.frame = None
        self.running = True
        self.ok = True
        self.t = threading.Thread(target=self._loop, daemon=True)
        self.t.start()

    def _loop(self):
        while self.running:
            if not self.cap.isOpened():
                self.ok = False
                time.sleep(0.01)
                continue

            # grab latest frame (reduce latency)
            grabbed = self.cap.grab()
            if not grabbed:
                self.ok = False
                time.sleep(0.005)
                continue

            ok, fr = self.cap.retrieve()
            if not ok:
                self.ok = False
                continue

            with self.lock:
                self.frame = fr
                self.ok = True

    def read(self):
        with self.lock:
            if self.frame is None:
                return False, None
            return True, self.frame.copy()

    def release(self):
        self.running = False
        try:
            self.t.join(timeout=0.2)
        except:
            pass
        self.cap.release()

def window_closed(name):
    try:
        return cv2.getWindowProperty(name, cv2.WND_PROP_VISIBLE) < 1
    except:
        return True

# =========================
# HELPERS
# =========================
def clamp(v, a, b):
    return max(a, min(b, v))

def put_text(img, text, org, scale=1.0, color=(255,255,255), th=2, font=cv2.FONT_HERSHEY_DUPLEX):
    cv2.putText(img, text, org, font, scale, (0,0,0), th+3, cv2.LINE_AA)
    cv2.putText(img, text, org, font, scale, color, th, cv2.LINE_AA)

def glass_panel(img, x, y, w, h, title="", val=""):
    # lightweight "glass": blur + tint
    x0, y0 = max(0, x), max(0, y)
    x1, y1 = min(img.shape[1], x+w), min(img.shape[0], y+h)
    if x1 <= x0 or y1 <= y0:
        return
    roi = img[y0:y1, x0:x1]
    blur = cv2.GaussianBlur(roi, (21, 21), 0)
    tint = np.full_like(blur, (20, 20, 25), dtype=np.uint8)
    panel = cv2.addWeighted(blur, 0.88, tint, 0.12, 0)
    img[y0:y1, x0:x1] = cv2.addWeighted(panel, 0.82, roi, 0.18, 0)

    cv2.rectangle(img, (x0, y0), (x1, y1), (255,255,255), 1, cv2.LINE_AA)
    if title:
        cv2.putText(img, title, (x+10, y+25), cv2.FONT_HERSHEY_SIMPLEX, 0.6, (200,200,200), 1, cv2.LINE_AA)
        cv2.putText(img, val, (x+10, y+70), cv2.FONT_HERSHEY_DUPLEX, 1.2, (255,255,255), 2, cv2.LINE_AA)

def adaptive_smooth(old, new):
    """Fast movement => more responsive, slow => smoother."""
    if new is None:
        return old
    ox, oy = old
    nx, ny = new
    speed = math.hypot(nx-ox, ny-oy)
    a = 0.35 if speed < 18 else 0.78
    return (int((1-a)*ox + a*nx), int((1-a)*oy + a*ny))

# =========================
# CORE CLASSES
# =========================
class Particle:
    def __init__(self, x, y, color, is_splatter=False):
        self.x, self.y = float(x), float(y)
        self.color = color
        self.is_splatter = is_splatter
        self.vx = random.uniform(-10, 10)
        self.vy = random.uniform(-15, 5)
        self.life = 1.0
        self.size = random.randint(10, 22) if is_splatter else random.randint(3, 7)
        self.gravity = 0.35 if not is_splatter else 0.10

    def update(self, dt):
        step = dt * 60.0
        self.x += self.vx * step
        self.y += self.vy * step
        self.vy += self.gravity * step
        self.life -= 0.040 * step

class AetherFruit:
    def __init__(self, side):
        self.side = side
        self.radius = 42
        self.active = True
        self.is_bomb = random.random() < 0.15
        self.color = COLOR_P1 if side == 'p1' else COLOR_P2
        if self.is_bomb:
            self.color = COLOR_BOMB

        margin = 150
        if side == 'p1':
            self.x = random.randint(margin, WIDTH//2 - margin)
            self.vx = random.uniform(2.0, 5.0)
        else:
            self.x = random.randint(WIDTH//2 + margin, WIDTH - margin)
            self.vx = random.uniform(-5.0, -2.0)

        self.y = HEIGHT + 50
        self.vy = random.uniform(-23, -17)
        self.rot = 0.0
        self.rot_v = random.uniform(-5, 5)

    def update(self, dt):
        step = dt * 60.0
        self.x += self.vx * step
        self.y += self.vy * step
        self.vy += 0.55 * step
        self.rot += self.rot_v * step
        return self.y < HEIGHT + 100 and -200 < self.x < WIDTH + 200

    def draw(self, img):
        if not self.active:
            return
        cx, cy = int(self.x), int(self.y)

        # glow ring
        glow = img.copy()
        cv2.circle(glow, (cx, cy), self.radius+12, tuple(int(c*0.25) for c in self.color), 3, cv2.LINE_AA)
        cv2.addWeighted(glow, 0.25, img, 0.75, 0, img)

        cv2.circle(img, (cx, cy), self.radius, self.color, -1, cv2.LINE_AA)
        cv2.circle(img, (cx-12, cy-12), 9, (255,255,255), -1, cv2.LINE_AA)

        if self.is_bomb:
            put_text(img, "X", (cx-14, cy+12), 1.1, (0,0,255), 3, cv2.FONT_HERSHEY_SIMPLEX)

# =========================
# HAND TRACKING (FAST + STABLE)
# =========================
def palm_center(hand_lms, sx, sy):
    # Palm center average: 0,5,9,13,17
    idxs = [0, 5, 9, 13, 17]
    xs = [hand_lms.landmark[i].x for i in idxs]
    ys = [hand_lms.landmark[i].y for i in idxs]
    x = int(np.mean(xs) * TRACK_W * sx)
    y = int(np.mean(ys) * TRACK_H * sy)
    return x, y

def index_tip(hand_lms, sx, sy):
    x = int(hand_lms.landmark[8].x * TRACK_W * sx)
    y = int(hand_lms.landmark[8].y * TRACK_H * sy)
    return x, y

def pick_best_per_side(landmarks, sx, sy):
    """
    Return tips dict: {'p1':(x,y) or None, 'p2':(x,y) or None}
    Strategy:
    - Compute palm center for each detected hand
    - Assign by palm center x < NET => p1 else p2
    - If multiple hands fall in same side, pick the one closest to that side center
    """
    cand = {'p1': [], 'p2': []}
    for hlm in landmarks:
        px, py = palm_center(hlm, sx, sy)
        tx, ty = index_tip(hlm, sx, sy)
        side = 'p1' if px < NET_X else 'p2'
        cand[side].append(((tx, ty), (px, py)))

    tips = {'p1': None, 'p2': None}
    if cand['p1']:
        target = (WIDTH//4, HEIGHT//2)
        tips['p1'] = min(cand['p1'], key=lambda item: (item[1][0]-target[0])**2 + (item[1][1]-target[1])**2)[0]
    if cand['p2']:
        target = (3*WIDTH//4, HEIGHT//2)
        tips['p2'] = min(cand['p2'], key=lambda item: (item[1][0]-target[0])**2 + (item[1][1]-target[1])**2)[0]
    return tips

# =========================
# GAME ENGINE
# =========================
class AetherEngine:
    def __init__(self):
        # Low-latency cam for laptop webcam
        self.cam = Camera(0, width=WIDTH, height=HEIGHT, backend=cv2.CAP_DSHOW)

        # MediaPipe lightweight
        self.hands = mp.solutions.hands.Hands(
            max_num_hands=2,
            model_complexity=0,
            min_detection_confidence=0.6,
            min_tracking_confidence=0.6
        )

        self.state = "MENU"  # MENU, PLAY, GAMEOVER
        self.reset_data()

    def reset_data(self):
        self.score = {'p1': 0, 'p2': 0}
        self.combo = {'p1': 0, 'p2': 0}
        self.last_hit = {'p1': 0.0, 'p2': 0.0}
        self.fruits = []
        self.particles = []
        self.trails = {'p1': deque(maxlen=15), 'p2': deque(maxlen=15)}
        self.shake = 0
        self.timer = 60
        self.start_time = 0.0
        self._spawn_cd = 0.0

    def apply_camera_shake(self, img):
        if self.shake > 0:
            dx = random.randint(-self.shake, self.shake)
            dy = random.randint(-self.shake, self.shake)
            M = np.float32([[1, 0, dx], [0, 1, dy]])
            img = cv2.warpAffine(img, M, (WIDTH, HEIGHT))
            self.shake = max(0, self.shake - 2)
        return img

    def run(self):
        cv2.namedWindow(GAME_NAME, cv2.WINDOW_NORMAL)
        prev = time.perf_counter()

        while True:
            if window_closed(GAME_NAME):
                break

            ok, frame = self.cam.read()
            if not ok or frame is None:
                continue

            frame = cv2.flip(frame, 1)

            now = time.perf_counter()
            dt = now - prev
            prev = now
            dt = clamp(dt, 0.0, 0.05)

            # 1) MediaPipe on SMALL frame (speed)
            rgb = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
            small = cv2.resize(rgb, (TRACK_W, TRACK_H))
            results = self.hands.process(small)

            sx = WIDTH / TRACK_W
            sy = HEIGHT / TRACK_H

            # 2) Base render
            display = frame.copy()
            display = self.apply_camera_shake(display)

            # net line
            cv2.line(display, (NET_X, 0), (NET_X, HEIGHT), (255,255,255), 1, cv2.LINE_AA)

            # 3) Hands -> stable tips per side
            tips = {'p1': None, 'p2': None}
            if results.multi_hand_landmarks:
                tips = pick_best_per_side(results.multi_hand_landmarks, sx, sy)

            # 4) Update trails (with smoothing)
            for side in ['p1', 'p2']:
                if tips[side] is not None:
                    if len(self.trails[side]) == 0:
                        self.trails[side].append(tips[side])
                    else:
                        sm = adaptive_smooth(self.trails[side][-1], tips[side])
                        self.trails[side].append(sm)

            # draw trail
            for side in ['p1', 'p2']:
                pts = list(self.trails[side])
                if len(pts) > 1:
                    color = COLOR_P1 if side == 'p1' else COLOR_P2
                    for i in range(1, len(pts)):
                        cv2.line(display, pts[i-1], pts[i], color, i, cv2.LINE_AA)

            # 5) State
            if self.state == "MENU":
                self.draw_menu(display, tips)
            elif self.state == "PLAY":
                self.update_play(display, tips, dt)
            elif self.state == "GAMEOVER":
                self.draw_game_over(display)

            # 6) Input
            cv2.imshow(GAME_NAME, display)
            key = cv2.waitKey(1) & 0xFF
            if key in (ord('q'), 27):  # q or ESC
                break
            if key == ord('r'):
                self.state = "MENU"
                self.reset_data()

        self.cam.release()
        cv2.destroyAllWindows()

    def draw_menu(self, img, tips):
        img[:] = cv2.GaussianBlur(img, (25, 25), 0)
        put_text(img, GAME_NAME, (WIDTH//2-300, HEIGHT//2-120), 2.6, (255,255,255), 5, cv2.FONT_HERSHEY_TRIPLEX)

        cx, cy = WIDTH//2, HEIGHT//2 + 60
        cv2.circle(img, (cx, cy), 64, (255,255,255), 2, cv2.LINE_AA)
        put_text(img, "SLICE TO START", (cx-120, cy+110), 0.95, (255,255,255), 2, cv2.FONT_HERSHEY_SIMPLEX)
        put_text(img, "R: RESET    Q/ESC: QUIT", (cx-150, cy+150), 0.75, (200,200,200), 2, cv2.FONT_HERSHEY_SIMPLEX)

        # detect slice hit start button
        for side in ['p1', 'p2']:
            if tips[side]:
                if math.hypot(tips[side][0]-cx, tips[side][1]-cy) < 64:
                    play_sound("start")
                    self.state = "PLAY"
                    self.start_time = time.time()
                    return

    def update_play(self, img, tips, dt):
        elapsed = time.time() - self.start_time
        self.timer = max(0, 60 - int(elapsed))
        if self.timer <= 0:
            self.state = "GAMEOVER"
            return

        # Spawn with cooldown (lebih stabil daripada random murni)
        self._spawn_cd -= dt
        if self._spawn_cd <= 0 and len(self.fruits) < 10:
            self.fruits.append(AetherFruit('p1'))
            self.fruits.append(AetherFruit('p2'))
            self._spawn_cd = random.uniform(0.25, 0.40)  # rate spawn

        # Update Fruits + collision
        for f in self.fruits[:]:
            if not f.update(dt):
                self.fruits.remove(f)
                continue

            f.draw(img)

            for side in ['p1', 'p2']:
                if tips[side] is None:
                    continue

                # territory rule
                if (side == 'p1' and f.x >= NET_X) or (side == 'p2' and f.x <= NET_X):
                    continue

                if math.hypot(tips[side][0]-f.x, tips[side][1]-f.y) < f.radius + 18:
                    self.handle_slice(f, side)

        # Update Particles (lebih ringan)
        new_particles = []
        for p in self.particles:
            p.update(dt)
            if p.life > 0:
                # draw
                overlay = img.copy()
                cv2.circle(overlay, (int(p.x), int(p.y)), p.size, p.color, -1, cv2.LINE_AA)
                cv2.addWeighted(overlay, clamp(p.life, 0, 1), img, 1-clamp(p.life, 0, 1), 0, img)
                new_particles.append(p)
        self.particles = new_particles

        # HUD
        glass_panel(img, 50, 20, 220, 100, "PLAYER 1", str(self.score['p1']))
        glass_panel(img, WIDTH-270, 20, 220, 100, "PLAYER 2", str(self.score['p2']))
        put_text(img, f"{self.timer}s", (WIDTH//2-35, 55), 1.6, (255,255,255), 2)

        # Combo label
        for s in ['p1', 'p2']:
            if self.combo[s] > 3:
                txt = "AETHER!!" if self.combo[s] > 8 else "COMBO!"
                x_pos = 90 if s == 'p1' else WIDTH-290
                put_text(img, f"{txt} x{self.combo[s]}", (x_pos, 155), 0.95, (0,255,255), 2, cv2.FONT_HERSHEY_TRIPLEX)

    def handle_slice(self, f, side):
        if not f.active:
            return
        f.active = False
        if f in self.fruits:
            self.fruits.remove(f)

        if f.is_bomb:
            play_sound("bomb")
            self.score[side] = max(0, self.score[side] - 50)
            self.shake = 26
            for _ in range(14):
                self.particles.append(Particle(f.x, f.y, (50,50,50), is_splatter=False))
        else:
            play_sound("slice")
            now = time.time()
            if now - self.last_hit[side] < 0.8:
                self.combo[side] += 1
                if self.combo[side] in (4, 7, 10):
                    play_sound("combo")
            else:
                self.combo[side] = 1
            self.last_hit[side] = now

            mult = 1.0 + (self.combo[side] * 0.10)
            self.score[side] += int(10 * mult)

            for _ in range(10):
                self.particles.append(Particle(f.x, f.y, f.color, is_splatter=True))

    def draw_game_over(self, img):
        img[:] = cv2.GaussianBlur(img, (41, 41), 0)
        winner = "DRAW"
        if self.score['p1'] > self.score['p2']:
            winner = "PLAYER 1 DOMINATES"
        elif self.score['p2'] > self.score['p1']:
            winner = "PLAYER 2 DOMINATES"

        put_text(img, "MATCH CONCLUDED", (WIDTH//2-270, HEIGHT//2-70), 1.7, (255,255,255), 3, cv2.FONT_HERSHEY_TRIPLEX)
        put_text(img, winner, (WIDTH//2-240, HEIGHT//2+25), 1.25, (0,255,255), 2, cv2.FONT_HERSHEY_SIMPLEX)
        put_text(img, "PRESS 'R' TO REMATCH", (WIDTH//2-210, HEIGHT//2+135), 0.85, (200,200,200), 2, cv2.FONT_HERSHEY_SIMPLEX)

if __name__ == "__main__":
    game = AetherEngine()
    game.run()
</pre>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-white border-t border-slate-100 py-20">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center gap-10">
                <div class="text-center md:text-left">
                    <h2 class="text-2xl font-extrabold text-pro-dark mb-4">Aether Blades</h2>
                    <p class="text-slate-500 max-w-sm">Solusi interaksi hulu-ke-hilir berbasis AI Vision untuk masa depan yang higienis dan futuristik.</p>
                </div>
                <div class="flex flex-col items-center md:items-end">
                    <p class="text-slate-400 text-sm mb-4">Ready to collaborate?</p>
                    <a href="mailto:contact@lab-ia.com" class="bg-pro-accent text-pro-primary px-8 py-3 rounded-full font-bold border border-blue-100 hover:bg-pro-primary hover:text-white transition">Hubungi Developer</a>
                </div>
            </div>
            
            <div class="mt-20 pt-8 border-t border-slate-200 flex flex-col md:flex-row justify-between items-start text-sm text-slate-500">
                <!-- Left side -->
                <div>
                    <p>&copy; 2025 Lab-IA Studio. All Rights Reserved.</p>
                </div>

                <!-- Right side -->
                <div class="md:text-right text-left mt-4 md:mt-0">
                    <p>Released under the <span class="font-bold text-pro-primary">MIT License</span> â€“ Open Source Software.</p>
                    <p>Permission is hereby granted for modification and distribution.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({ once: true, duration: 800 });

        function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert("Berhasil disalin ke Clipboard!");
            });
        }
    </script>
</body>
</html>